{% extends 'base.html' %}
{% block title %}Completed Orders | Freelancer Dashboard{% endblock %}

{% block content %}
<section class="py-5 bg-light" style="min-height:100vh;">
  <div class="container">
    <h2 class="fw-bold text-primary mb-4 text-center">Completed Orders</h2>

    {% if orders %}
      <div class="table-responsive">
        <table class="table table-hover align-middle bg-white shadow-sm rounded">
          <thead class="table-primary text-center">
            <tr>
              <th>#</th>
              <th>Customer</th>
              <th>Email</th>
              <th>Gig</th>
              <th>Payment</th>
              <th>Completed On</th>
              <th>Chat</th>
            </tr>
          </thead>
          <tbody class="text-center">
            {% for order in orders %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ order.customer.username }}</td>
                <td>{{ order.customer.email }}</td>
                <td>{{ order.gig.title }}</td>
                <td>${{ order.payment_amount }}</td>
                <td>{{ order.created_at|date:"M d, Y" }}</td>
                <td>
                  <a href="{% url 'freelance_marketplace:chat' order.id %}" class="btn btn-outline-success btn-sm">
                     Chat with {{ order.customer.username }}
                  </a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% else %}
      <p class="text-center text-muted">No completed orders yet.</p>
    {% endif %}
  </div>
</section>

<style>
  .btn-outline-success {
    color: #1dbf73;
    border-color: #1dbf73;
  }
  .btn-outline-success:hover {
    background-color: #1dbf73;
    color: #fff;
  }
</style>
{% endblock %}
